<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
    <title>????3????????????????????????????</title>
    <style>
        canvas {
            border: 1px solid #000;
            display: block;
            margin: 20px auto;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas"
        width="400"
        height="400"></canvas>
    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 150;
        const numPoints = 15;
        const points = [];
        for (let i = 0; i < numPoints; i++) {
            const angle = (i / numPoints) * Math.PI * 2;
            points.push({
                angle: angle,
                distance: Math.random() * 20 + 10,
                speed: (Math.random() * 0.05 + 0.02) / 15,
                offset: Math.random() * Math.PI * 2
            });
        }
        function getPoint(point, time, loop) {
            const x = centerX + (radius + point.distance * Math.sin(time * point.speed + point.offset + loop * Math.PI * 2 / 3)) * Math.cos(point.angle);
            const y = centerY + (radius + point.distance * Math.sin(time * point.speed + point.offset + loop * Math.PI * 2 / 3)) * Math.sin(point.angle);
            return { x, y };
        }
        function drawCircle() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            const time = Date.now();

            const allPoints = [];
            // ???????????
            for (let loop = 0; loop < 3; loop++) {
                allPoints.push(...points.map(point => getPoint(point, time, loop)));
            }

            // ???????????
            ctx.moveTo(allPoints[0].x, allPoints[0].y);

            // ?????????????
            for (let i = 0; i < allPoints.length; i++) {
                const current = allPoints[i];
                const next = allPoints[(i + 1) % allPoints.length];
                const nextNext = allPoints[(i + 2) % allPoints.length];

                const controlX = (current.x + next.x) / 2;
                const controlY = (current.y + next.y) / 2;

                const endX = (next.x + nextNext.x) / 2;
                const endY = (next.y + nextNext.y) / 2;

                ctx.bezierCurveTo(controlX, controlY, next.x, next.y, endX, endY);
            }

            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 2;
            ctx.stroke();
        }
        function animate() {
            drawCircle();
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>

</html>